176,113 tech salaries visualized â€“ a dataviz dashboard
======================================================

https://github.com/Swizec/h1b-software-salaries/tree/modern-code

Show a Preloader
----------------

import bootstrap css in index.js
// src/index.js
import React from "react"
import ReactDOM from "react-dom"
import App from "./App"
// Insert the line(s) between here...
import "bootstrap/dist/css/bootstrap.css"
// ...and here.
ReactDOM.render(<App />, document.getElementById('root'))

Another benefit of Webpack
- importing stylesheets turn into style tags with CSS in their body in runtime

index.js
- load App and React
- load styles
- Use ReactDOM to render <App /> into the DOM


Load and Parse your data
------------------------
load data async using d3 csv parse script 

App.js
import d3, lodash (utility)
loadAllData from DataHandling
- keep code organize
- we will create this file

// defining whats in your component state in advance makes your code easier to read
// people know what to expect
useState
- medianIncomes 
- countyNames

// useEffect to run when React first mounts the component
loadAllData((data) => {
  // get techSalaries, medianIncomes, countyNames
  setTechsalaries
  setMedianIncomes
  setCountyNames
})
- when loadAllData runs, it will fetch data, parse data and update state
- tie data loading to component mounts cuz it means you arent making requests you'll never use
- use state setters in the cb
- this updates Apps state and triggers a re-render -> updates our entire viz via props

h1
- Loaded {techSalaries.length} salaries
- render this message to show our data finished loading

D3 v5 
- updated its data loading methods to use promises instead of callbacks
d3.csv('filename').then(data => ...)
- the promise resolves your data or throws an error

loadAllData = async () => {
  const datasets = await Promise.all([
    d3.json('data/us.json'),
    d3.csv('data/....csv', cleanCounty),
    d3.csv('data/....csv', cleanIncome),
    ...
    d3.tsv('data/us-state-names.tsv', cleanUSStateName)
  ])
}
- d3 fetches the data, then on the promise return, it accepts a callback
- in this callback, well pass in our util method to clean up the data returned

D3 supporsts formats like json, csv, tsv, text, and xml out of the box